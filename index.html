<!doctype html>
<html lang="en">
<head>
  <!-- ========== SEO / Head ========== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fallacy Trainer — Practice spotting logical fallacies</title>
  <meta name="description" content="Practice spotting logical fallacies with an elegant, accessible trainer. Multiple-choice and free-answer modes, built-in glossary, and progress tracking." />
  <!-- Open Graph -->
  <meta property="og:title" content="Fallacy Trainer — Practice spotting logical fallacies" />
  <meta property="og:description" content="Multiple-choice + free-answer modes, built-in glossary, accessible, fast, no sign-ups." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://example.com/" />
  <meta property="og:image" content="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='630'><rect width='100%' height='100%' fill='%23111827'/><text x='50%' y='52%' dominant-baseline='middle' text-anchor='middle' font-family='Inter, Arial' font-weight='700' font-size='56' fill='%236366F1'>Fallacy Trainer</text></svg>" />
  <!-- Favicon placeholders -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%23111827%22/><circle cx=%2250%22 cy=%2250%22 r=%2232%22 fill=%22%236366F1%22/></svg>">
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgo=" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <style>
    /* ================================
       DESIGN TOKENS
       ================================ */
    :root{
      --color-bg: #F9FAFB;
      --color-text: #111827;           /* near-black (primary) */
      --color-text-2: #374151;         /* secondary */
      --color-muted: #9CA3AF;          /* muted */
      --color-card: #ffffff;
      --color-border: rgba(17,24,39,0.08);
      --indigo: #6366F1;               /* accent primary */
      --cyan: #22D3EE;                 /* accent highlight */
      --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
      --shadow-md: 0 6px 20px rgba(0,0,0,.08);
      --shadow-lg: 0 20px 50px rgba(0,0,0,.12);
      --radius: 14px;
      --maxw: 1100px;
      --grid: 8px;
    }
    /* Dark theme overrides */
    :root[data-theme="dark"]{
      --color-bg: #0B0F18;
      --color-text: #F9FAFB;
      --color-text-2: #D1D5DB;
      --color-muted: #9CA3AF;
      --color-card: #0F1626;
      --color-border: rgba(99,102,241,0.22);
      --shadow-sm: 0 1px 2px rgba(0,0,0,.4);
      --shadow-md: 0 6px 20px rgba(0,0,0,.32);
      --shadow-lg: 0 20px 50px rgba(0,0,0,.35);
    }

    /* ================================
       GLOBAL / UTILS
       ================================ */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--color-text);
      background:var(--color-bg);
      line-height:1.6;
      letter-spacing: 0.15px;
    }
    .wrap{max-width:var(--maxw); margin:0 auto; padding: 0 calc(var(--grid)*2);}
    .muted{color:var(--color-muted)}
    .text-2{color:var(--color-text-2)}
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:12px 18px; border-radius:12px; border:1px solid var(--color-border);
      background:var(--color-card); color:var(--color-text);
      box-shadow:var(--shadow-sm); cursor:pointer; text-decoration:none; font-weight:600;
      transition:transform .12s ease, box-shadow .18s ease, background .18s ease;
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:var(--shadow-md);}
    .btn.primary{ background:linear-gradient(180deg, var(--indigo), #4F46E5); color:#fff; border-color:transparent;}
    .btn.ghost{ background:transparent; }
    .tag{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--color-border);font-size:12px}
    .card{
      background: var(--color-card);
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-md);
    }
    .grid{display:grid;gap:calc(var(--grid)*2)}
    .grid-3{grid-template-columns: repeat(3, minmax(0,1fr))}
    .grid-4{grid-template-columns: repeat(4, minmax(0,1fr))}
    @media (max-width:1024px){ .grid-3{grid-template-columns: repeat(2, minmax(0,1fr))} .grid-4{grid-template-columns: repeat(2, minmax(0,1fr))}}
    @media (max-width:640px){ .grid-3,.grid-4{grid-template-columns: 1fr} }

    /* Focus styles */
    :where(a,button,input,select,textarea,summary,[tabindex]){:focus-visible{outline:3px solid var(--cyan); outline-offset:2px; border-radius:10px}}

    /* ================================
       NAVBAR (sticky + glassy)
       ================================ */
    .nav{
      position: sticky; top: 0; z-index: 40;
      backdrop-filter: saturate(1.2) blur(8px);
      background: color-mix(in hsl, var(--color-bg) 70%, transparent);
      border-bottom: 1px solid var(--color-border);
    }
    .nav .inner{display:flex; align-items:center; justify-content:space-between; padding: 14px 0;}
    .brand{
      display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:.3px;
    }
    .brand .logo{
      width:28px; height:28px; border-radius:8px;
      background:
        conic-gradient(from 180deg, var(--indigo), var(--cyan), var(--indigo));
      box-shadow: inset 0 -3px 0 rgba(0,0,0,.2);
    }
    .nav a{ color:var(--color-text-2); text-decoration:none; font-weight:600; }
    .links{display:flex; align-items:center; gap:18px}
    .theme-toggle{
      border:1px solid var(--color-border);
      border-radius:999px; padding:8px 12px; background:var(--color-card); color:var(--color-text);
      display:inline-flex; align-items:center; gap:8px; cursor:pointer;
    }

    /* ================================
       HERO (animated background)
       ================================ */
    .hero{
      position:relative; overflow:hidden;
      padding: calc(var(--grid)*8) 0 calc(var(--grid)*10);
    }
    .hero h1{
      font-family: "Playfair Display", Georgia, "Times New Roman", serif;
      font-weight:700; letter-spacing:.4px; line-height:1.2;
      margin: 0 0 16px; font-size: clamp(36px, 6vw, 56px);
    }
    .hero .sub{max-width:720px; margin: 0 0 24px}
    .hero .cta{display:flex; gap:12px; flex-wrap:wrap}
    /* subtle animated blobs */
    .hero::before, .hero::after{
      content:""; position:absolute; inset: -20% -20% auto auto; width: 60vmax; height: 60vmax;
      background: radial-gradient(circle at 30% 30%, color-mix(in srgb, var(--indigo) 24%, transparent), transparent 55%),
                  radial-gradient(circle at 70% 60%, color-mix(in srgb, var(--cyan) 22%, transparent), transparent 55%);
      z-index:-1; opacity:.45; transform: translateZ(0);
      animation: floaty 18s ease-in-out infinite alternate;
    }
    .hero::after{ inset: auto auto -30% -10%; width: 50vmax; height: 50vmax; opacity:.35; filter: blur(2px); animation-duration: 24s;}
    @keyframes floaty { from{ transform: translate(-2%, -2%) scale(1);} to{ transform: translate(2%, 3%) scale(1.06);} }
    @media (prefers-reduced-motion: reduce){
      .hero::before,.hero::after{ animation:none }
    }

    /* ================================
       CARDS (modes / highlights)
       ================================ */
    .card.item{
      padding: 20px; transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
    }
    .card.item:hover{ transform: translateY(-4px); box-shadow: var(--shadow-lg); border-color: color-mix(in hsl, var(--indigo) 40%, var(--color-border))}
    .icon{
      width:38px; height:38px; border-radius:10px; display:grid; place-items:center;
      color:#fff; background: linear-gradient(180deg, var(--indigo), #4F46E5);
      box-shadow: var(--shadow-sm); margin-bottom:10px;
    }

    /* ================================
       TRAINER (app card)
       ================================ */
    .trainer{ padding: 22px; }
    .trainer .controls{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin-bottom:10px }
    .trainer .question{ font-size: 18px; margin: 10px 0 12px; }
    .pill{font-size:12px}
    .opt{ display:flex; gap:10px; align-items:flex-start; padding:12px; border-radius:12px; border:1px solid var(--color-border); background:var(--color-card); cursor:pointer }
    .opt:hover{ box-shadow: var(--shadow-sm) }
    .opt.active{ outline: 2px solid var(--indigo) }
    .opt.correct{ background: color-mix(in srgb, #10B981 16%, var(--color-card)); border-color: #10B981 }
    .opt.wrong{ background: color-mix(in srgb, #EF4444 16%, var(--color-card)); border-color: #EF4444 }
    /* info button inside each option row */
    .info-btn{
      margin-left:auto;
      padding:6px 8px;
      border:1px solid var(--color-border);
      background:var(--color-card);
      border-radius:8px;
      cursor:pointer;
    }

    .helper{font-size:13px; color:var(--color-muted)}
    .toolbar{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px }

    /* ================================
       SECTIONS / FAQ
       ================================ */
    section{ padding: calc(var(--grid)*9) 0 }
    .section-head{ display:flex; align-items:end; justify-content:space-between; gap:10px; margin-bottom: 18px}
    .section-head h2{
      font-family:"Playfair Display", Georgia, serif; font-size: clamp(26px, 4vw, 36px); margin:0;
    }
    .features .bullet{ display:flex; gap:12px; align-items:flex-start }
    .features .bullet svg{ flex: 0 0 auto}

    /* Testimonials carousel */
    .carousel{ position:relative; }
    .carousel .track{ display:flex; overflow:hidden; scroll-behavior:smooth }
    .carousel .slide{ flex: 0 0 100%; padding: 0 10px }
    .carousel .controls{ display:flex; gap:10px; justify-content:center; margin-top:12px }
    .carousel button{ border:1px solid var(--color-border); background:var(--color-card); padding:8px 12px; border-radius:8px; cursor:pointer }
    .carousel button[disabled]{ opacity:.5; cursor:not-allowed }

    /* FAQ */
    details{ border:1px solid var(--color-border); border-radius:12px; padding:12px; background:var(--color-card)}
    details+details{ margin-top: 10px }
    summary{ cursor:pointer; list-style:none; font-weight:700 }
    summary::-webkit-details-marker{ display:none }

    /* ================================
       FOOTER
       ================================ */
    footer{ padding: calc(var(--grid)*8) 0; border-top:1px solid var(--color-border)}
    .social{ display:flex; gap:12px }
    .email-form{ display:flex; gap:8px; flex-wrap:wrap }
    .input{
      border:1px solid var(--color-border); background:var(--color-card); color:var(--color-text);
      padding:12px 14px; border-radius:12px; min-width:260px;
    }
    .toast{
      position:fixed; right:16px; bottom:16px; padding:10px 14px; border-radius:10px; background:var(--color-card); border:1px solid var(--color-border); box-shadow:var(--shadow-md); display:none;
    }
  </style>
</head>
<body>
  <!-- ========== Navbar ========== -->
  <nav class="nav" aria-label="Primary">
    <div class="wrap inner">
      <a class="brand" href="#top" aria-label="Home">
        <span class="logo" aria-hidden="true"></span>
        <span>Fallacy Trainer</span>
      </a>
      <div class="links" role="menubar" aria-label="Site">
        <a href="#trainer" role="menuitem">Practice</a>
        <a href="#features" role="menuitem">Features</a>
        <a href="#faq" role="menuitem">FAQ</a>
        <button class="theme-toggle" id="themeToggle" aria-pressed="false" aria-label="Toggle theme">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 18a6 6 0 010-12v12zm0 0a6 6 0 006-6 6 6 0 00-6-6v12z"/></svg>
          Theme
        </button>
      </div>
    </div>
  </nav>

  <!-- ========== Hero ========== -->
  <header class="hero" id="top">
    <div class="wrap">
      <span class="tag">Learn to spot flawed reasoning</span>
      <h1>Sharpen your eye for logical fallacies.</h1>
      <p class="sub text-2">A fast, friendly trainer for debates, essays, and everyday claims. Multiple-choice and free-answer modes, built-in glossary, and subtle hints. No sign-ups.</p>
      <div class="cta">
        <a class="btn primary" href="#trainer">Start practicing</a>
        <a class="btn ghost" href="#features">See how it works</a>
      </div>
    </div>
  </header>

  <!-- ========== Cards (quick highlights) ========== -->
  <section class="wrap grid grid-3" aria-label="Highlights">
    <article class="card item">
      <div class="icon" aria-hidden="true">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 12l7-7 11 11-7 7-11-11z"/></svg>
      </div>
      <h3>Two training modes</h3>
      <p class="text-2">Pick exact fallacies in multiple-choice or type answers with alias &amp; fuzzy matching.</p>
    </article>
    <article class="card item">
      <div class="icon" aria-hidden="true" style="background:linear-gradient(180deg,#22D3EE,#06B6D4)">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l4 7 8 1-6 5 2 8-8-4-8 4 2-8-6-5 8-1z"/></svg>
      </div>
      <h3>Glossary on tap</h3>
      <p class="text-2">Concise definitions attached to each option. Study without leaving the flow.</p>
    </article>
    <article class="card item">
      <div class="icon" aria-hidden="true">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5a2 2 0 00-2 2v14l4-4h12a2 2 0 002-2V5a2 2 0 00-2-2z"/></svg>
      </div>
      <h3>Progress that sticks</h3>
      <p class="text-2">Score, streak, and weak spots are saved locally. Reset any time.</p>
    </article>
  </section>

  <!-- ========== TRAINER (app) ========== -->
  <section id="trainer" class="wrap">
    <div class="section-head">
      <h2>Practice now</h2>
      <span class="muted">Keyboard: 1–6 select • Enter submit • N next</span>
    </div>
    <div class="card trainer" role="region" aria-label="Fallacy trainer">
      <div class="controls">
        <span class="pill">Mode:
          <label style="margin-left:8px"><input type="radio" name="mode" value="mc" checked> Multiple choice</label>
          <label style="margin-left:8px"><input type="radio" name="mode" value="free"> Free answer</label>
        </span>
        <div class="pill">Score: <strong id="score" style="margin-left:8px">0</strong> • Streak: <strong id="streak">0</strong> • Played: <strong id="played">0</strong></div>
      </div>

      <div class="muted" id="domain">Domain: —</div>
      <p id="claim" class="question"></p>
      <div id="options" class="grid grid-3" role="group" aria-label="Options"></div>

      <div id="free" class="toolbar" style="display:none">
        <input id="answer" class="input" placeholder="Type the fallacy (aliases & close spellings accepted)" aria-label="Your answer" />
        <button id="submitFree" class="btn">Submit</button>
      </div>

      <div class="toolbar">
        <button id="submit" class="btn primary">Submit</button>
        <button id="skip" class="btn">Skip</button>
        <button id="next" class="btn">Next</button>
        <button id="reset" class="btn" style="margin-left:auto">Reset</button>
      </div>

      <div id="result" class="helper" aria-live="polite" style="min-height:22px"></div>
    </div>
  </section>

  <!-- ========== Features ========== -->
  <section id="features" class="wrap features">
    <div class="section-head">
      <h2>Built for clarity</h2>
    </div>
    <div class="grid grid-3">
      <div class="bullet">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm-1 15l-4-4 1.4-1.4 2.6 2.58 5.6-5.58L18 10l-7 7z"/></svg>
        <div>
          <strong>Defensible prompts</strong>
          <p class="text-2">Medium-hard claims with clear fallacy anchors—no trick tautologies.</p>
        </div>
      </div>
      <div class="bullet">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 12h18M12 3v18"/></svg>
        <div>
          <strong>Accessible UI</strong>
          <p class="text-2">Semantic HTML, AA contrast, keyboard nav, and reduced-motion respect.</p>
        </div>
      </div>
      <div class="bullet">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M4 4h16v4H4zm0 6h16v10H4z"/></svg>
        <div>
          <strong>Study glossary</strong>
          <p class="text-2">Tap “i” on any option to view a concise definition while you practice.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== Testimonials (Carousel) ========== -->
  <section class="wrap">
    <div class="section-head">
      <h2>What learners say</h2>
      <span class="muted">Press ← / → to navigate</span>
    </div>
    <div class="carousel" aria-roledescription="carousel" aria-label="Testimonials">
      <div class="track" id="carouselTrack">
        <div class="slide">
          <article class="card" style="padding:18px">
            <p>“Made debate club drills actually fun. The free-answer mode catches typos but still counts it.”</p>
            <p class="muted">— Samir B., Debate Captain</p>
          </article>
        </div>
        <div class="slide">
          <article class="card" style="padding:18px">
            <p>“Great for freshmen comp—clear wording, no weird gotchas. The glossary is clutch.”</p>
            <p class="muted">— Prof. L. Nguyen, Writing Center</p>
          </article>
        </div>
        <div class="slide">
          <article class="card" style="padding:18px">
            <p>“I share this in group chat whenever politics gets loud. Keeps us honest.”</p>
            <p class="muted">— Amina K., Community Organizer</p>
          </article>
        </div>
      </div>
      <div class="controls">
        <button id="prev" aria-label="Previous testimonial">Prev</button>
        <button id="nextC" aria-label="Next testimonial">Next</button>
      </div>
    </div>
  </section>

  <!-- ========== FAQ ========== -->
  <section id="faq" class="wrap">
    <div class="section-head">
      <h2>FAQ</h2>
      <span class="muted">One open at a time</span>
    </div>
    <div id="faqList">
      <details>
        <summary>What counts as “correct” in free-answer?</summary>
        <p class="text-2">We match common aliases (e.g., “ad populum” ↔ “appeal to popularity” ↔ “bandwagon”) and allow small typos via approximate matching.</p>
      </details>
      <details>
        <summary>Do you track personal data?</summary>
        <p class="text-2">No accounts. Progress lives in your browser only (localStorage).</p>
      </details>
      <details>
        <summary>Can I use this in class?</summary>
        <p class="text-2">Yes—share your link. The UI is keyboard-friendly and works offline once loaded.</p>
      </details>
    </div>
  </section>

  <!-- ========== Footer ========== -->
  <footer class="wrap" id="contact" aria-label="Footer">
    <div class="grid grid-3">
      <div>
        <div class="brand"><span class="logo" aria-hidden="true"></span> Fallacy Trainer</div>
        <p class="muted">Made for thoughtful conversations. © 2025</p>
        <div class="social" aria-label="Social links">
          <a class="btn" href="#" aria-label="Twitter">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M3 3h3.6l5 6.6L17.7 3H21l-7.2 9.2L21 21h-3.6l-5.2-6.9L6.3 21H3l7.6-9.8L3 3z"/>
            </svg>
          </a>
          <a class="btn" href="#" aria-label="GitHub">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .5a12 12 0 0 0-3.8 23.4c.6.1.8-.2.8-.6v-2.1c-3.3.7-4-1.6-4-1.6-.6-1.6-1.4-2-1.4-2-1.2-.8.1-.8.1-.8 1.3.1 2 .1 2 .1 1.1 2 3 1.5 3.7 1.2.1-.8.4-1.5.8-1.9-2.6-.3-5.4-1.3-5.4-6a4.6 4.6 0 0 1 1.2-3.3 4.3 4.3 0 0 1 .1-3.2s1-.3 3.2 1.2a11 11 0 0 1 5.8 0c2.2-1.5 3.2-1.2 3.2-1.2.4 1 .3 2 0 3a4.7 4.7 0 0 1 1.2 3.3c0 4.7-2.8 5.7-5.4 6 .5.4.9 1.2.9 2.4v3.6c0 .3.2.7.8.6A12 12 0 0 0 12 .5Z"/></svg>
          </a>
        </div>
      </div>
      <div>
        <h4>Links</h4>
        <ul style="list-style:none; padding:0; margin:0">
          <li><a href="#trainer">Practice</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#faq">FAQ</a></li>
        </ul>
      </div>
      <div>
        <h4>Get updates</h4>
        <form id="emailForm" class="email-form" novalidate>
          <input class="input" id="email" type="email" placeholder="you@example.com" aria-label="Email" required>
          <button class="btn primary" type="submit">Subscribe</button>
        </form>
      </div>
    </div>
  </footer>

  <div class="toast" id="toast" role="status" aria-live="polite">Thanks! Check your inbox.</div>

  <!-- ========== Minimal JS ========== -->
  <script>
    /* =========================================
       Theme toggle (persisted)
       ========================================= */
    (function(){
      const root = document.documentElement;
      const btn = document.getElementById("themeToggle");
      const preferred = () =>
        (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches)
          ? "dark" : "light";
      const apply = (t) => {
        root.setAttribute("data-theme", t);
        localStorage.setItem("theme", t);
        btn.setAttribute("aria-pressed", t==="dark");
        btn.title = t==="dark" ? "Switch to light theme" : "Switch to dark theme";
      };
      const saved = localStorage.getItem("theme");
      apply(saved || preferred());
      btn.addEventListener("click", ()=> apply(root.getAttribute("data-theme")==="dark" ? "light" : "dark"));
    })();

    /* =========================================
       Email capture (front-end validate + toast)
       ========================================= */
    (function(){
      const form = document.getElementById("emailForm");
      const toast = document.getElementById("toast");
      form.addEventListener("submit", (e)=>{
        e.preventDefault();
        const email = document.getElementById("email").value.trim();
        if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)) { toast.textContent = "Enter a valid email."; }
        else { toast.textContent = "Thanks! Check your inbox."; }
        toast.style.display = "block";
        setTimeout(()=> toast.style.display="none", 2400);
        form.reset();
      });
    })();

    /* =========================================
       Testimonial carousel (accessible)
       ========================================= */
    (function(){
      const track = document.getElementById("carouselTrack");
      const prev = document.getElementById("prev");
      const next = document.getElementById("nextC");
      let index = 0;
      const slides = () => Array.from(track.children);
      const go = (i)=>{ index = Math.max(0, Math.min(i, slides().length-1)); track.scrollTo({left: track.clientWidth*index, behavior: "smooth"}); prev.disabled = index===0; next.disabled = index===slides().length-1; };
      prev.addEventListener("click", ()=>go(index-1));
      next.addEventListener("click", ()=>go(index+1));
      document.addEventListener("keydown",(e)=>{ if(document.activeElement.closest(".carousel")){ if(e.key==="ArrowLeft") go(index-1); if(e.key==="ArrowRight") go(index+1);} });
      let pause=false; track.addEventListener("mouseenter",()=>pause=true); track.addEventListener("mouseleave",()=>pause=false);
      setInterval(()=>{ if(!pause && window.matchMedia("(prefers-reduced-motion: no-preference)").matches) go(index+1); }, 5000);
      go(0);
    })();

    /* =========================================
       FAQ: only one open at a time
       ========================================= */
    (function(){
      const list = document.getElementById("faqList");
      list.addEventListener("toggle", (e)=>{
        if(e.target.tagName.toLowerCase()!=="details" || !e.target.open) return;
        Array.from(list.querySelectorAll("details")).forEach(d => { if(d!==e.target) d.open=false; });
      }, true);
    })();

    /* =========================================
       TRAINER APP (MC + FREE)
       ========================================= */
    (function(){
      // Canonical fallacy list
      const FALLACY_LIST = [
        "ad hominem","straw man","false dilemma","circular reasoning","slippery slope","hasty generalization",
        "appeal to authority","appeal to emotion","post hoc","correlation/causation","composition/division",
        "no true Scotsman","begging the question","equivocation","gambler’s fallacy","bandwagon","red herring",
        "loaded question","genetic fallacy","tu quoque","Texas sharpshooter","appeal to ignorance","special pleading",
        "appeal to popularity","appeal to tradition","appeal to novelty","appeal to nature","middle ground",
        "moving the goalposts","false equivalence","sunk cost","anecdotal","burden of proof"
      ];

      const DEF = {
        "ad hominem":"Attacking the person instead of the argument.",
        "straw man":"Misstating an opponent’s view to refute more easily.",
        "false dilemma":"Pretending there are only two options.",
        "circular reasoning":"Conclusion is used as a premise.",
        "slippery slope":"Small step allegedly leads to extreme outcomes.",
        "hasty generalization":"Too-small sample to generalize.",
        "appeal to authority":"Status/fame as proof.",
        "appeal to emotion":"Feelings replace reasons.",
        "post hoc":"After → therefore because.",
        "correlation/causation":"Association ≠ cause.",
        "composition/division":"Part–whole mix-up.",
        "no true Scotsman":"Redefine group to dodge examples.",
        "begging the question":"Conclusion restated as premise.",
        "equivocation":"Word meaning shifts mid-argument.",
        "gambler’s fallacy":"Short-run balancing assumed.",
        "bandwagon":"Popularity ⇒ truth (ad populum).",
        "red herring":"Irrelevant distraction.",
        "loaded question":"Built-in accusation in question.",
        "genetic fallacy":"Judged by origin, not merits.",
        "tu quoque":"Dismiss via hypocrisy.",
        "Texas sharpshooter":"Cherry-picking clusters.",
        "appeal to ignorance":"No disproof ⇒ true.",
        "special pleading":"Ad-hoc exception to avoid standards.",
        "appeal to popularity":"Same as bandwagon.",
        "appeal to tradition":"True because it’s traditional.",
        "appeal to novelty":"Better because it’s new.",
        "appeal to nature":"‘Natural’ ⇒ good.",
        "middle ground":"Compromise assumed correct.",
        "moving the goalposts":"Criteria shift after proof.",
        "false equivalence":"Unequal things treated as equal.",
        "sunk cost":"Continue because of past spend.",
        "anecdotal":"Personal story as proof.",
        "burden of proof":"Critic must disprove claim."
      };

      // Rich alias groups
      const ALIAS_GROUPS = {
        ad_hominem: ["ad hominem","adhominem","ad-hominem","ad personam","adpersonam","personal attack","poisoning the well","name-calling","attacking the person","circumstantial ad hominem","abusive ad hominem","ad homonym"],
        straw_man: ["straw man","strawman","straw-man","aunt sally","hollow man","misrepresentation","misstating the argument","weak man"],
        false_dilemma: ["false dilemma","false-dilemma","false dichotomy","false-dichotomy","either-or fallacy","either or fallacy","black-or-white","black and white","bifurcation fallacy","excluded middle","false binary","forced choice"],
        circular_reasoning: ["circular reasoning","circular argument","circulus in probando","assumes what it proves","assuming the conclusion","vicious circle","begs the question (strict)","question-begging"],
        slippery_slope: ["slippery slope","slippery-slope","thin end of the wedge","thin edge of the wedge","camel's nose","domino effect (fallacy)","if we allow this then that"],
        hasty_generalization: ["hasty generalization","hasty-generalization","faulty generalization","overgeneralization","insufficient sample","small sample fallacy","converse accident","jumping to conclusions","non-representative sample"],
        appeal_to_authority: ["appeal to authority","argument from authority","argumentum ad verecundiam","ad verecundiam","ipse dixit","false authority","appeal to false authority","because expert said so"],
        appeal_to_emotion: ["appeal to emotion","emotional appeal","argumentum ad passiones","playing on emotions","emotive language","emotional manipulation","appeal to feelings"],
        post_hoc: ["post hoc","post hoc ergo propter hoc","post-hoc","false cause","questionable cause","after this therefore because of this","coincidental correlation","superstitious reasoning"],
        correlation_causation: ["correlation vs causation","confusing correlation with causation","cum hoc ergo propter hoc","cum hoc","correlation implies causation","spurious correlation","cause-effect confusion"],
        composition_division: ["composition/division","fallacy of composition","composition fallacy","parts-to-whole","whole-to-parts","fallacy of division","division fallacy","what’s true of parts is true of whole","what’s true of whole is true of parts"],
        no_true_scotsman: ["no true scotsman","no-true-scotsman","appeal to purity","purity fallacy","not a real x","real x wouldn’t","scotsman fallacy"],
        begging_the_question: ["begging the question","petitio principii","begs the question (strict)","assuming the conclusion","circular definition","arguing in a circle"],
        equivocation: ["equivocation","ambiguity fallacy","semantic ambiguity","double meaning","shifting meaning","wordplay fallacy","weasel words"],
        gamblers_fallacy: ["gambler's fallacy","gamblers fallacy","gambler fallacy","monte carlo fallacy","law of averages (fallacy)","due for a win","streak fallacy"],
        bandwagon: ["bandwagon","bandwagon fallacy","appeal to popularity","ad populum","argumentum ad populum","appeal to majority","everyone’s doing it","popular = true","social proof fallacy"],
        red_herring: ["red herring","red-herring","distraction","smokescreen","smoke screen","changing the subject","misdirection","irrelevant point","irrelevant conclusion","ignoratio elenchi"],
        loaded_question: ["loaded question","complex question","many questions","have you stopped","presupposition fallacy","question with a trap","leading question (loaded)"],
        genetic_fallacy: ["genetic fallacy","origin fallacy","appeal to origin","source fallacy","attacking the source","because of where it came from"],
        tu_quoque: ["tu quoque","tuquoque","to quoque","you too","appeal to hypocrisy","whataboutism","hypocrisy fallacy"],
        texas_sharpshooter: ["texas sharpshooter","texas-sharpshooter","sharpshooter fallacy","cherry-picking data","cluster illusion","pattern hunting","p-hacking (colloq)","selective evidence"],
        appeal_to_ignorance: ["appeal to ignorance","argument from ignorance","ad ignorantiam","lack of evidence = proof","not proven false so true","ignorance fallacy","appeal to lack of knowledge"],
        special_pleading: ["special pleading","moving the goalposts","ad hoc rescue","double standard","exception without justification","no true exception"]
      };

      const CANON = {
        ad_hominem:"ad hominem",
        straw_man:"straw man",
        false_dilemma:"false dilemma",
        circular_reasoning:"circular reasoning",
        slippery_slope:"slippery slope",
        hasty_generalization:"hasty generalization",
        appeal_to_authority:"appeal to authority",
        appeal_to_emotion:"appeal to emotion",
        post_hoc:"post hoc",
        correlation_causation:"correlation/causation",
        composition_division:"composition/division",
        no_true_scotsman:"no true Scotsman",
        begging_the_question:"begging the question",
        equivocation:"equivocation",
        gamblers_fallacy:"gambler’s fallacy",
        bandwagon:"bandwagon",
        red_herring:"red herring",
        loaded_question:"loaded question",
        genetic_fallacy:"genetic fallacy",
        tu_quoque:"tu quoque",
        texas_sharpshooter:"Texas sharpshooter",
        appeal_to_ignorance:"appeal to ignorance",
        special_pleading:"special pleading"
      };

      // Normalizer (loose) + Levenshtein
      const normLoose = s => (s||"").toLowerCase().normalize("NFKD").replace(/[\s\-\.'’_]+/g,"").replace(/[^a-z0-9]/g,"");
      function lev(a,b){
        const m=a.length,n=b.length;
        if(!m) return n; if(!n) return m;
        const d = Array(n+1).fill(0).map((_,j)=>j);
        for(let i=1;i<=m;i++){
          let prev=d[0]; d[0]=i;
          for(let j=1;j<=n;j++){
            const tmp=d[j];
            const cost=a[i-1]===b[j-1]?0:1;
            d[j]=Math.min(d[j]+1, d[j-1]+1, prev+cost);
            prev=tmp;
          }
        }
        return d[n];
      }
      const simRatio = (a,b)=>{ a=normLoose(a); b=normLoose(b); return 1 - (lev(a,b)/Math.max(a.length,b.length||1)); };

      // Build alias lookup
      const ALIASES = new Map();
      // include all canonical labels
      FALLACY_LIST.forEach(f => ALIASES.set(normLoose(f), f));
      // include group aliases
      for(const [key,list] of Object.entries(ALIAS_GROUPS)){
        const canon = CANON[key];
        if(canon){ list.forEach(alias => ALIASES.set(normLoose(alias), canon)); }
      }

      // Resolver: exact alias; else fuzzy (>=0.88) within known aliases only
      function resolve(input){
        const x = normLoose(input);
        if(!x) return null;
        if(ALIASES.has(x)) return ALIASES.get(x);
        let best = {canon:null, score:0};
        for(const [alias,canon] of ALIASES.entries()){
          const r = simRatio(x, alias);
          if(r > best.score) best = {canon, score:r};
        }
        return best.score >= 0.88 ? best.canon : null;
      }

      // generator (single-correct)
      const DOMAINS = ["news","science","politics","everyday life","ads","tech","sports","health"];
      const pick = (arr,r)=> arr[Math.floor(r()*arr.length)];
      const rng = (seed)=>{ let t=seed>>>0; return ()=>((t+=0x6D2B79F5, t=(t^t>>>15)*(1|t), t^=t+(t^t>>>7)*(61|t), (t^t>>>14)>>>0)/4294967296); };

      function gen(seed){
        const r = rng(seed);
        const d = pick(DOMAINS, r);
        const f = pick(FALLACY_LIST, r);
        const L = {news:"report",science:"paper",politics:"proposal","everyday life":"advice",ads:"campaign",tech:"benchmark",sports:"strategy",health:"trial"};
        function thing(){ return L[d] || "claim"; }
        const T = {
          "ad hominem": ()=>`Ignore ${pick(["Rana","Ilyas","Marta","Liang","Noura","Miguel","Avery","Fatima","Owen","Leila"],r)}’s ${thing()}; they once ${pick(["misspelled a post","missed a deadline","took a small grant"],r)}, so their argument is worthless.`,
          "straw man": ()=>`People who question the new ${pick(["congestion fee","AI audit rule","transit pass","plastics ban"],r)} secretly want ${pick(["to abolish all traffic laws","a surveillance state","to ban education"],r)}; therefore we must reject them outright.`,
          "false dilemma": ()=>`Either we adopt ${pick(["the congestion fee","AI audit rule","a universal transit pass"],r)} immediately or ${pick(["the economy will crash","our freedoms will vanish"],r)}—there’s no middle ground.`,
          "circular reasoning": ()=>`${pick(["This wellness program","Our metric"],r)} works because it’s effective—and it’s effective because it works.`,
          "slippery slope": ()=>`If we allow ${pick(["deadline extensions","optional homework","anonymous feedback"],r)} today, tomorrow ${pick(["standards will evaporate","no one will work"],r)}—so we must stop it now.`,
          "hasty generalization": ()=>`I met two ${pick(["app users","drivers","students"],r)} who ${pick(["ignored instructions","broke the rules"],r)}; therefore all ${pick(["app users","drivers","students"],r)} do that.`,
          "appeal to authority": ()=>`${pick(["a billionaire influencer","a retired actor","a famous podcaster"],r)} said ${pick(["coffee cures insomnia","AI ends jobs by winter"],r)}, so it must be true.`,
          "appeal to emotion": ()=>`Think of ${pick(["the children","small shop owners"],r)}! If you cared, you’d support ${pick(["the congestion fee","the audit rule"],r)} without asking questions.`,
          "post hoc": ()=>`After ${pick(["the mayor’s announcement","the redesign"],r)}, ${pick(["complaints","sales","crime"],r)} increased; thus the ${pick(["announcement","redesign"],r)} caused it.`,
          "correlation/causation": ()=>`${pick(["screen time","ice-cream sales"],r)} correlates with ${pick(["anxiety","drownings"],r)}; therefore ${pick(["anxiety","drownings"],r)} causes ${pick(["screen time","ice-cream sales"],r)}.`,
          "composition/division": ()=>`Each ${pick(["player","committee member"],r)} is honest, so the whole ${pick(["team","committee"],r)} is honest.`,
          "no true Scotsman": ()=>`No real ${pick(["patriot","scientist"],r)} would ${pick(["take a vacation","recycle"],r)}; anyone who does isn’t a true ${pick(["patriot","scientist"],r)}.`,
          "begging the question": ()=>`${pick(["The congestion fee","Data localization"],r)} is justified because it’s the right thing to do.`,
          "equivocation": ()=>`Since “theory” means explanation and speculation, science is just guesses.`,
          "gambler’s fallacy": ()=>`Heads appeared four times; it’s due for tails.`,
          "bandwagon": ()=>`${1+Math.floor(Math.random()*9)} million people already support ${pick(["the pass","the ban"],r)}—join the winning side.`,
          "red herring": ()=>`Yes, the safety inspection was missed, but have you seen our new mascot?`,
          "loaded question": ()=>`Have you stopped hiding conflicts of interest while promoting the fee?`,
          "genetic fallacy": ()=>`This plan originated on a talk show, so it’s unreliable by default.`,
          "tu quoque": ()=>`You flew business last year, so your argument for the fee is invalid.`,
          "Texas sharpshooter": ()=>`Out of 80 cases, 4 successes prove the herbal extract works—ignore the rest.`,
          "appeal to ignorance": ()=>`No one has disproven that tax cuts pay for themselves; therefore it’s true.`,
          "special pleading": ()=>`Our pilot shouldn’t be judged by ordinary evidence—it’s a visionary exception.`,
          "appeal to popularity": ()=>`Everyone knows this diet works, so it must be right.`,
          "appeal to tradition": ()=>`We’ve always done it this way; therefore it’s correct.`,
          "appeal to novelty": ()=>`The new framework is better because it’s new.`,
          "appeal to nature": ()=>`Natural products are safe and effective by definition.`,
          "middle ground": ()=>`One side says always, the other says never; the truth must be exactly between.`,
          "moving the goalposts": ()=>`Even though you met the criteria, it isn’t enough—new proof required.`,
          "false equivalence": ()=>`Forgetting a badge and embezzlement are both rule violations, so they’re basically the same.`,
          "sunk cost": ()=>`We’ve spent so much that we must continue this failing project.`,
          "anecdotal": ()=>`My cousin tried it once and it worked, so the studies are wrong.`,
          "burden of proof": ()=>`You can’t prove me wrong, therefore I’m right.`
        };
        const claim = T[f]();
        // build options
        const r2 = rng(seed ^ 0x9E3779B9);
        const opts = [f, ...FALLACY_LIST.filter(x=>x!==f).sort(()=>r2()-0.5).slice(0,5)].sort(()=>r2()-0.5);
        const letters = opts.map((o,i)=>o===f ? String.fromCharCode(65+i) : null).filter(Boolean);
        return { domain:d, fallacy:f, claim, options:opts, letters };
      }

      // ---- App state & references ----
      const $ = sel => document.querySelector(sel);
      const $claim = $("#claim"), $opts = $("#options"), $free = $("#free"), $ans=$("#answer");
      const $score = $("#score"), $streak = $("#streak"), $played = $("#played"), $res=$("#result"), $dom=$("#domain");
      const $submit = $("#submit"), $submitFree=$("#submitFree"), $skip=$("#skip"), $next=$("#next"), $reset=$("#reset");
      const $mode = document.querySelectorAll("input[name='mode']");
      const storeKey = "ft_state_v1";
      let S = { score:0, streak:0, played:0, seed:Math.floor(Math.random()*1e9) };
      try{ const saved = JSON.parse(localStorage.getItem(storeKey)); if(saved) S = {...S, ...saved}; }catch{}

      let Q=null, picked=null, mode="mc";

      function render(forceSeed){
        Q = gen((S.seed + S.played*1013 + (forceSeed?37:0))>>>0);
        picked=null; $res.textContent="";
        $dom.textContent = "Domain: " + Q.domain;
        $claim.textContent = Q.claim;
        // mode toggle
        mode = Array.from($mode).find(x=>x.checked)?.value || "mc";
        $opts.innerHTML = "";
        if(mode==="mc"){
          $opts.style.display = "grid";
          $free.style.display = "none";
          Q.options.forEach((name,i)=>{
            const wrap = document.createElement("div");
            wrap.className = "opt";
            wrap.setAttribute("role","button");
            wrap.setAttribute("tabindex","0");
            wrap.dataset.letter = String.fromCharCode(65+i);
            wrap.innerHTML = `
              <strong style="min-width:22px">${String.fromCharCode(65+i)}.</strong>
              <span style="font-weight:700">${name}</span>
              <button type="button" class="info-btn" aria-label="Definition for ${name}">i</button>`;
            const select = ()=>{ Array.from($opts.children).forEach(x=>x.classList.remove("active")); wrap.classList.add("active"); picked = name; };
            wrap.addEventListener("click",(e)=>{ if(e.target.closest(".info-btn")) return; select(); });
            wrap.addEventListener("keydown",(e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); select(); } });
            wrap.querySelector(".info-btn").addEventListener("click",(e)=>{
              e.stopPropagation();
              alert(name + ": " + (DEF[name] || "No definition yet."));
            });
            $opts.appendChild(wrap);
          });
        } else {
          $opts.style.display = "none";
          $free.style.display = "flex";
          $ans.value=""; $ans.focus();
        }
        // update counters
        $score.textContent=S.score; $streak.textContent=S.streak; $played.textContent=S.played;
      }

      function finalize(ok, interpreted){
        if(ok){ S.score++; S.streak++; $res.textContent="✔ Correct"; $res.style.color="#10B981"; }
        else { S.streak=0; $res.textContent=`✘ Incorrect. Answer: ${Q.fallacy}${interpreted?` • You: ${interpreted}`:""}`; $res.style.color="#EF4444"; }
        S.played++; localStorage.setItem(storeKey, JSON.stringify(S));
        $score.textContent=S.score; $streak.textContent=S.streak; $played.textContent=S.played;
      }

      // submit handlers
      $submit.addEventListener("click", ()=>{
        if(mode==="mc"){
          if(!picked){ $res.textContent="Pick one option (1–6)."; $res.style.color="var(--color-muted)"; return; }
          const ok = picked===Q.fallacy;
          Array.from($opts.children).forEach((el,i)=>{
            const name = Q.options[i];
            el

